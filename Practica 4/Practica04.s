PCTL				EQU 2_11111111	
PORTB				EQU 0x400053FC;salida	
GPIO_PORTB_AMSEL_R 	EQU 0x40005528
GPIO_PORTB_PCTL_R	EQU 0x4000552C
GPIO_PORTB_DIR_R 	EQU 0x40005400
GPIO_PORTB_AFSEL_R 	EQU 0x40005420
GPIO_PORTB_DEN_R 	EQU 0x4000551C
GPIO_PORTB_LOCK_R 	EQU 0x40005520
GPIO_PORTB_CR_R 	EQU 0x40005524	


PORTE04				EQU 0x40024044;pines de entrada
GPIO_PORTE_AMSEL_R 	EQU 0x40024528
GPIO_PORTE_PCTL_R 	EQU 0x4002452C
GPIO_PORTE_DIR_R 	EQU 0x40024400
GPIO_PORTE_AFSEL_R 	EQU 0x40024420
GPIO_PORTE_DEN_R 	EQU 0x4002451C
GPIO_PORTE_LOCK_R 	EQU 0x40024520
GPIO_PORTE_CR_R 	EQU 0x40024524
SYSCTL_RCGCGPIO_R   EQU 0x400FE608
PCTLE				EQU 2_11111111	
CTE50	 	   	    EQU 100000	;50 ms	
CTE1			    EQU 3333333;1 seg	
CONSTANTE			EQU 100000
	AREA |.text|, CODE, READONLY, ALIGN=2
	THUMB
	EXPORT Start

Start
	BL Inicio

Inicio	
;------------------------------------------	
	;PUERTO B	
	LDR R1, =SYSCTL_RCGCGPIO_R
	LDR R0, [R1]
	ORR R0, R0, #0x02
	STR R0, [R1]
	NOP
	NOP
	;deshabilitar funcion analogica
	LDR R1, =GPIO_PORTB_AMSEL_R
	LDR R0, [R1]
	BIC R0, #0xFF
	STR R0, [R1]	

	LDR R1, =GPIO_PORTB_PCTL_R
	LDR R0, [R1]
	LDR R2, =PCTL
	LDR R3, [R2]
	BIC R0, R0, R3
	;BIC R0, #0x00F00000
	STR R0, [R1]
	
	LDR R1, =GPIO_PORTB_DIR_R ;PB1234 OUT
	LDR R0, [R1]
	ORR R0, #0xFF
	STR R0, [R1]		

	LDR R1, =GPIO_PORTB_AFSEL_R
	LDR R0, [R1]
	BIC R0, #0xFF
	STR R0, [R1]
	
	LDR R1, =GPIO_PORTB_DEN_R
	LDR R0, [R1]
	ORR R0, #0xFF
	STR R0, [R1]		
;--------------------------------------	
	;PUERTO E
	LDR R1, =SYSCTL_RCGCGPIO_R
	LDR R0, [R1]
	ORR R0, R0, #0x10
	STR R0, [R1]
	NOP
	NOP
	;deshabilitar funcion analogica
	LDR R1, =GPIO_PORTE_AMSEL_R
	LDR R0, [R1]
	BIC R0, #0x11
	STR R0, [R1]	

	LDR R1, =GPIO_PORTE_PCTL_R
	LDR R0, [R1]
	LDR R2, =PCTL
	LDR R3, [R2]
	BIC R0, R0, R3
	;BIC R0, #0x00F00000
	STR R0, [R1]

	LDR R1, =GPIO_PORTE_DIR_R ;PE0125
	LDR R0, [R1]
	BIC R0, R0, #0x11
	STR R0, [R1]	

	LDR R1, =GPIO_PORTE_AFSEL_R
	LDR R0, [R1]
	BIC R0, R0, #0x11
	STR R0, [R1]
	
	LDR R1, =GPIO_PORTE_DEN_R
	LDR R0, [R1]
	ORR R0, #0x11
	STR R0, [R1]
	
	LDR R3, =CONSTANTE
	B Loop
Delay
	ADD R2, #1
	NOP
	NOP
	NOP
	NOP
	CMP R2, R3
	BNE Delay
	BX LR	

	
;----------CONTADORES DE TIEMPO-----------------	
Contador1
	SUB R10, #1
	CMP R10, #0
	BNE Contador1
	BX LR
Contador50	
	SUB R10, #1
	CMP R10, #0
	BNE Contador50
	BX LR

;-----------------------------------------------
Apagar
	LDR R1, =PORTB;765
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50
	B Loop

ASC;CERO
	LDR R1, =PORTB;765
	MOV R0, #0x3F
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR0
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	

UNO
	LDR R1, =PORTB;765
	MOV R0, #0x06
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR1
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
DOS
	LDR R1, =PORTB;765
	MOV R0, #0x5B
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR2
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
TRES
	LDR R1, =PORTB;765
	MOV R0, #0x4F
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR3
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	

CUATRO
	LDR R1, =PORTB;765
	MOV R0, #0x66
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR4
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	

CINCO
	LDR R1, =PORTB;765
	MOV R0, #0x6D
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR5
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	

SEIS
	LDR R1, =PORTB;765
	MOV R0, #0x7D
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR6
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
SIETE
	LDR R1, =PORTB;765
	MOV R0, #0x07
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR7
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
OCHO
	LDR R1, =PORTB;765
	MOV R0, #0x7F
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1

APAGAR8
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
NUEVE
	LDR R1, =PORTB;765
	MOV R0, #0x67
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR9
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50
	B Loop
DES;NINE
	LDR R1, =PORTB;765
	MOV R0, #0x67
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
	
APAGAR9F
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50		

EIGHT
	LDR R1, =PORTB;765
	MOV R0, #0x7F
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGARF
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50		
SEVEN
	LDR R1, =PORTB;765
	MOV R0, #0x07
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1

APAGAR7F
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50		
	
SIX
	LDR R1, =PORTB;765
	MOV R0, #0x7D
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR6F
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
FIVE
	LDR R1, =PORTB;765
	MOV R0, #0x6D
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR5F
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
FOUR
	LDR R1, =PORTB;765
	MOV R0, #0x66
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR4F
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
TRHEE
	LDR R1, =PORTB;765
	MOV R0, #0x4F
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR3F
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
TWO
	LDR R1, =PORTB;765
	MOV R0, #0x5B
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR2F
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
ONE
	LDR R1, =PORTB;765
	MOV R0, #0x06
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR1F
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
ZERO
	LDR R1, =PORTB;765
	MOV R0, #0x3F
	STR R0, [R1]
	LDR R10, =CTE1
	BL Contador1
APAGAR0F
	LDR R1, =PORTB;765
	MOV R0, #0x0
	STR R0, [R1]
	LDR R10, =CTE50
	BL Contador50	
	B Loop
		

Loop	; Ciclo para lectura de switch.
	; Leer el valor del switch.
	LDR R1, =PORTE04
	LDR R0, [R1]
	LDR R1, =PORTE04
	LDR R0, [R1]
	LDR R2, =0
	BL Delay;
	
	CMP R0, #0x01
	BEQ ASC
	CMP R0, #0x00
	BEQ DES
	CMP R0, #0x11
	BEQ Apagar
	
	B Loop
	
	ALIGN
	END