PORTA2345			EQU 0x400040F0;pines de salida 	
GPIO_PORTA_AMSEL_R 	EQU 0x40004528
GPIO_PORTA_PCTL_R 	EQU 0x4000452C
GPIO_PORTA_DIR_R 	EQU 0x40004400
GPIO_PORTA_AFSEL_R 	EQU 0x40004420
GPIO_PORTA_DEN_R 	EQU 0x4000451C
GPIO_PORTA_LOCK_R 	EQU 0x40004520
GPIO_PORTA_CR_R 	EQU 0x40004524
PCTL				EQU 2_11111111	
;GPIO_PORTB2 		EQU 0x40005010; PWM
PORTB1234			EQU 0x40005078;salida	
GPIO_PORTB_AMSEL_R 	EQU 0x40005528
GPIO_PORTB_PCTL_R	EQU 0x4000552C
GPIO_PORTB_DIR_R 	EQU 0x40005400
GPIO_PORTB_AFSEL_R 	EQU 0x40005420
GPIO_PORTB_DEN_R 	EQU 0x4000551C
GPIO_PORTB_LOCK_R 	EQU 0x40005520
GPIO_PORTB_CR_R 	EQU 0x40005524	

PORTC4567			EQU 0x400063C0	
GPIO_PORTC_AMSEL_R 	EQU 0x40006528
GPIO_PORTC_PCTL_R 	EQU 0x4000652C
GPIO_PORTC_DIR_R 	EQU 0x40006400
GPIO_PORTC_AFSEL_R 	EQU 0x40006420
GPIO_PORTC_DEN_R 	EQU 0x4000651C
GPIO_PORTC_LOCK_R 	EQU 0x40006520
GPIO_PORTC_CR_R 	EQU 0x40006524

PORTE01245			EQU 0x400240DC;pines de entrada
GPIO_PORTE_AMSEL_R 	EQU 0x40024528
GPIO_PORTE_PCTL_R 	EQU 0x4002452C
GPIO_PORTE_DIR_R 	EQU 0x40024400
GPIO_PORTE_AFSEL_R 	EQU 0x40024420
GPIO_PORTE_DEN_R 	EQU 0x4002451C
GPIO_PORTE_LOCK_R 	EQU 0x40024520
GPIO_PORTE_CR_R 	EQU 0x40024524
SYSCTL_RCGCGPIO_R   EQU 0x400FE608
CTE50MS 	   	    EQU 100000	;50 mseg
CTE1MS				EQU 3333	
CTE2				EQU 6666667	; 2 seg
CTE3				EQU 10000000; 3 seg	
CTE5				EQU	1666667; 1s
CTE10			    EQU 33333333;10 seg	
CONSTANTE			EQU 100000
	
	AREA |.text|, CODE, READONLY, ALIGN=2
	THUMB
	EXPORT Start
Start
	BL Inicio
Inicio	
;PUERTO 'A'
	LDR R1, =SYSCTL_RCGCGPIO_R
	LDR R0, [R1]
	ORR R0, R0, #0x01
	STR R0, [R1]
	NOP
	NOP
	;deshabilitar funcion analogica
	LDR R1, =GPIO_PORTA_AMSEL_R
	LDR R0, [R1]
	BIC R0, #0x3C
	STR R0, [R1]	
	LDR R1, =GPIO_PORTA_PCTL_R
	LDR R0, [R1]
	LDR R2, =PCTL
	LDR R3, [R2]
	BIC R0, R0, R3
	;BIC R0, #0x00F00000
	STR R0, [R1]
	LDR R1, =GPIO_PORTA_DIR_R ;PA2345
	LDR R0, [R1]
	ORR R0, #0x3C
	STR R0, [R1]
	LDR R1, =GPIO_PORTA_AFSEL_R
	LDR R0, [R1]
	BIC R0, #0x3C
	STR R0, [R1]
	LDR R1, =GPIO_PORTA_DEN_R
	LDR R0, [R1]
	ORR R0, #0x3C
	STR R0, [R1]
;------------------------------------------	
	;PUERTO B	
	LDR R1, =SYSCTL_RCGCGPIO_R
	LDR R0, [R1]
	ORR R0, R0, #0x02
	STR R0, [R1]
	NOP
	NOP
	;deshabilitar funcion analogica
	LDR R1, =GPIO_PORTB_AMSEL_R
	LDR R0, [R1]
	BIC R0, #0x1E
	STR R0, [R1]
	
	LDR R1, =GPIO_PORTB_PCTL_R
	LDR R0, [R1]
	LDR R2, =PCTL
	LDR R3, [R2]
	BIC R0, R0, R3
	;BIC R0, #0x00F00000
	STR R0, [R1]
	LDR R1, =GPIO_PORTB_DIR_R ;PB1234 OUT
	LDR R0, [R1]
	ORR R0, #0x1E
	STR R0, [R1]		
	LDR R1, =GPIO_PORTB_AFSEL_R
	LDR R0, [R1]
	BIC R0, #0x1E
	STR R0, [R1]
	LDR R1, =GPIO_PORTB_DEN_R
	LDR R0, [R1]
	ORR R0, #0x1E
	STR R0, [R1]		
;-------------------------------------
	;PUERTO C	
	LDR R1, =SYSCTL_RCGCGPIO_R
	LDR R0, [R1]
	ORR R0, R0, #0x04
	STR R0, [R1]
	NOP
	NOP
	;deshabilitar funcion analogica
	LDR R1, =GPIO_PORTC_AMSEL_R
	LDR R0, [R1]
	BIC R0, #0xF0
	STR R0, [R1]
	
	LDR R1, =GPIO_PORTC_PCTL_R
	LDR R0, [R1]
	LDR R2, =PCTL
	LDR R3, [R2]
	BIC R0, R0, R3
	;BIC R0, #0x00F00000
	STR R0, [R1]
	LDR R1, =GPIO_PORTC_DIR_R ;PC4567
	LDR R0, [R1]
	ORR R0, #0xF0
	STR R0, [R1]
	LDR R1, =GPIO_PORTC_AFSEL_R
	LDR R0, [R1]
	BIC R0, #0xF0
	STR R0, [R1]
	LDR R1, =GPIO_PORTC_DEN_R
	LDR R0, [R1]
	ORR R0, #0xF0
	STR R0, [R1]	
;--------------------------------------	
	;PUERTO E
	LDR R1, =SYSCTL_RCGCGPIO_R
	LDR R0, [R1]
	ORR R0, R0, #0x10
	STR R0, [R1]
	NOP
	NOP
	;deshabilitar funcion analogica
	LDR R1, =GPIO_PORTE_AMSEL_R
	LDR R0, [R1]
	BIC R0, #0x37
	STR R0, [R1]	

	LDR R1, =GPIO_PORTE_PCTL_R
	LDR R0, [R1]
	LDR R2, =PCTL
	LDR R3, [R2]
	BIC R0, R0, R3
	;BIC R0, #0x00F00000
	STR R0, [R1]

	LDR R1, =GPIO_PORTE_DIR_R ; IN PE01245
	LDR R0, [R1]
	BIC R0, R0, #0x37
	STR R0, [R1]	
	LDR R1, =GPIO_PORTE_AFSEL_R
	LDR R0, [R1]
	BIC R0, R0, #0x37
	STR R0, [R1]
	LDR R1, =GPIO_PORTE_DEN_R
	LDR R0, [R1]
	ORR R0, #0x37
	STR R0, [R1]
	
	LDR R3,=CONSTANTE
	B Loop
	
Delay
	ADD R2, #1
	NOP
	NOP
	NOP
	NOP
	CMP R2, R3
	BNE Delay
	BX LR		
;----------CONTADORES DE TIEMPO-----------------	
Contador1
	SUB R10, #1
	CMP R10, #0
	BNE Contador1
	BX LR	
Contador2
	SUB R10, #1
	CMP R10, #0
	BNE Contador2
	BX LR	
Contador3
	SUB R10, #1
	CMP R10, #0
	BNE Contador3
	BX LR
Contador5	
	SUB R10, #1
	CMP R10, #0
	BNE Contador5
	BX LR	
Contador10
	SUB R10, #1
	CMP R10, #0
	BNE Contador10
	BX LR
Contador50	
	SUB R10, #1
	CMP R10, #0
	BNE Contador50
	BX LR
;---------------------------------------------
;----------------MANUAL-----------------------
;---------------------------------------------
MANUAL
	LDR R1, =PORTA2345;432
	MOV R0, #0x1C
	STR R0, [R1]
	LDR R10, =CTE5
	BL Contador5
VOFFMM	
	LDR R1, =PORTA2345
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE1MS
	BL Contador1
	B Loop
MENOS1;naranja
	LDR R1, =PORTC4567;765
	MOV R0, #0xE0
	STR R0, [R1]
	LDR R10, =CTE2
	BL Contador2
AOFFM
	LDR R1, =PORTC4567
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE50MS
	BL Contador50		
ROJOM
	LDR R1, =PORTB1234
	MOV R0, #0x0E
	STR R0, [R1]
	LDR R10, =CTE10
	BL Contador10
ROFFM	
	LDR R1, =PORTB1234
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE50MS
	BL Contador50
	B Loop

MENOS2
	LDR R1, =PORTC4567;765
	MOV R0, #0xE0
	STR R0, [R1]
	LDR R10, =CTE2
	BL Contador2
AOFFM2
	LDR R1, =PORTC4567
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE50MS
	BL Contador50		
ROJOM2
	LDR R1, =PORTB1234
	MOV R0, #0x0E
	STR R0, [R1]
	LDR R10, =CTE10
	BL Contador10
ROFFM2	
	LDR R1, =PORTB1234
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE50MS
	BL Contador50
	B Loop

MENOS3
	LDR R1, =PORTC4567;765
	MOV R0, #0xE0
	STR R0, [R1]
	LDR R10, =CTE2
	BL Contador2
AOFFM3
	LDR R1, =PORTC4567
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE50MS
	BL Contador50		
ROJOM3
	LDR R1, =PORTB1234
	MOV R0, #0x0E
	STR R0, [R1]
	LDR R10, =CTE10
	BL Contador10
ROFFM3	
	LDR R1, =PORTB1234
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE50MS
	BL Contador50
	B Loop
;----------------------------------;
;----------------------------------;
TALANQUERA
	LDR R1, =PORTA2345;5
	MOV R0, #0x20	; SE ENCIENDO EL PIN A5
	STR R0, [R1]
	LDR R10, =CTE2
	BL Contador2
Taloff	
	LDR R1, =PORTA2345;5
	MOV R0, #0x00	; SE ENCIENDO EL PIN A5
	STR R0, [R1]
	LDR R10, =CTE50MS
	BL Contador50
Regresar
	LDR R1, =PORTC4567;SE ENCIENDO EL PIN c4
	MOV R0, #0x10
	STR R0, [R1]
	LDR R10, =CTE2
	BL Contador2
Regoff
	LDR R1, =PORTC4567;765
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE50MS
	BL Contador50
	B Loop
;----------------------------------------------
;-------------AUTOMATICO-----------------------
;----------------------------------------------

AUTO;VERDE y uno rojo	
	LDR R1, =PORTA2345;432
	MOV R0, #0x1C
	STR R0, [R1]
	LDR R10, =CTE10
	BL Contador10
VOFF	
	LDR R1, =PORTA2345
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE50MS
	BL Contador50
AMARILLO
	LDR R1, =PORTC4567;765
	MOV R0, #0xE0
	STR R0, [R1]
	LDR R10, =CTE3
	BL Contador3
AOFF
	LDR R1, =PORTC4567
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE50MS
	BL Contador50		
ROJO
	LDR R1, =PORTB1234;123
	MOV R0, #0x0E
	STR R0, [R1]
	LDR R10, =CTE10
	BL Contador10
ROFF	
	LDR R1, =PORTB1234
	MOV R0, #0x00
	STR R0, [R1]
	LDR R10, =CTE50MS
	BL Contador50
	B Loop
Loop
	LDR R1, =PORTE01245
	LDR R0, [R1]	
	LDR R2, =0
	BL Delay

	CMP R0, #0x00;ninguno
	BEQ AUTO
	
	CMP R0, #0x01;PE0
	BEQ MANUAL
	
	CMP R0, #0x03;PE0 Y PE1
	BEQ MENOS1
	
	CMP R0, #0x05;PE0 Y PE2
	BEQ MENOS2
	
	CMP R0, #0x11;PE0 Y PE4
	BEQ MENOS3
	
	CMP R0, #0x21; PE0 y PE5
	BEQ TALANQUERA
	
	CMP R0, #0x20;PE5
	BEQ TALANQUERA
	B Loop

	ALIGN
	END