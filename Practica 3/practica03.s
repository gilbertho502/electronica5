SYSCTL_RCGCGPIO_R	EQU 0x400FE608 ; INICIO DEL RELOJ
GPIO_PORTF_AMSEL_R	EQU 0x40025528 ; ELIMINA EL ANALOGO DEL PUERTO F
GPIO_PORTF_PCTL_R	EQU 0x4002552C ; CONFIGURACION GPIO
GPIO_PORTF_DIR_R	EQU 0x40025400 ; DIRECCION DEL REGISTRO
GPIO_PORTF_AFSEL_R	EQU 0x40025420 ; ELIMINA CUALQUIER OTRA SEÒAL DEL PUERTO
GPIO_PORTF_DEN_R	EQU 0x4002551C ; PUERTOS DIGITALES
PF0					EQU 0x40025004 ; HABILITACION DEL PUERTO F0
PF12				EQU 0x40025018 ; HABILITACION DEL PUERTO F12
PF4					EQU 0X40025040
PF3					EQU 0X40025020
GPIO_PORTF_LOCK_R	EQU 0x40025520 ; CODIGO DE DESBLOQUEO
GPIO_LOCK_KEY		EQU 0x4C4F434B ; LLAVE PARA DESBLOQUEO
GPIO_PORF_CR_R		EQU 0x40025524
CONSTANTE1			EQU 12000000
CONSTANTE2			EQU 24000000
CONSTANTE3			EQU 36000000
CONSTANTE4			EQU 48000000
CONSTANTE5			EQU 60000000
CONSTANTE6			EQU 1

	AREA codigo, CODE, READONLY, ALIGN=2
	THUMB ; ES ELQUE DEFINE EL USO DE LAS INSTRUCCIONES
	
	EXPORT Start ;DECLARACION DE Start COMO GLOBAL
		
Start ;PUNTO DE ENTRADA A PARTIR DEL STARTUP
;PASO 1: ACTIVACION DEL RELOJ PARA PUERTO F
	LDR R1, =SYSCTL_RCGCGPIO_R
	LDR R0, [R1]
	ORR R0, R0,#0x20
	STR R0, [R1]
	NOP
	NOP
;PASO 2: DESBLOQUEO DE PINES
	LDR R1, =GPIO_PORTF_LOCK_R
	LDR R0, =GPIO_LOCK_KEY	
	STR R0, [R1]
	LDR R1, =GPIO_PORF_CR_R
	MOV R0, #0xFF
	STR R0, [R1]
;PASO 3: DESHABILITAR FUNCION ANALOGICA
	LDR R1, =GPIO_PORTF_AMSEL_R
	LDR R0, [R1]
	BIC R0, R0,#0x25
	STR R0, [R1]
;PASO 4; CONFIGURACION DEL GPIO, PCTL=0
	LDR R1, =GPIO_PORTF_PCTL_R
	LDR R0, [R1]
	BIC R0, R0,#0x000000FF
	BIC R0, R0,#0x00000F00
	STR R0, [R1]
;PASO 5: ESPECIFICAR LA DIRECCION PF12
	LDR R1, =GPIO_PORTF_DIR_R
	LDR R0, [R1]
	ORR R0, R0,#0x06
	STR R0, [R1]
;PASO 5: ESPECIFICAR LA DIRECCION PF3
	LDR R1, =GPIO_PORTF_DIR_R
	LDR R0, [R1]
	ORR R0, R0,#0x08
	STR R0, [R1]
;PASO 5: ESPECIFICAR LA DIRECCION PF4
	LDR R1, =GPIO_PORTF_DIR_R
	LDR R0, [R1]
	ORR R0, R0,#0x10
	STR R0, [R1]
;PASO 5: ESPECIFICAR LA DIRECCION PF0
	LDR R1, =GPIO_PORTF_DIR_R
	LDR R0, [R1]
	ORR R0, R0,#0x01
	STR R0, [R1]
;PASO 6: LIMPIAR LOS BITS EN FUNCION ALTERNATIVA
	LDR R1, =GPIO_PORTF_AFSEL_R
	LDR R0, [R1]
	BIC R0, R0,#0x25
	STR R0, [R1]
;PASO 7: HABILITAR EL PUERTO DIGITAL
	LDR R1, =GPIO_PORTF_DEN_R
	LDR R0, [R1]
	BIC R0, R0,#0x25
	STR R0, [R1]
	
	
	LDR R10, =CONSTANTE1
	LDR R11, =CONSTANTE2
	LDR R12, =CONSTANTE3
	LDR R13, =CONSTANTE4
	LDR R14, =CONSTANTE5
	LDR R15, =CONSTANTE6
	B Loop
	
PAUSA1 ;RETARDO
	ADD R2, #1
	NOP
	NOP
	NOP
	NOP
	CMP R2, R10
	BNE PAUSA
	;BX LR ;BIFURCACION, DETERMINA EL ESTADO DEL PROCESADOR
	BEQ APAGADO
	
PAUSA2 ;RETARDO
	ADD R2, #1
	NOP
	NOP
	NOP
	NOP
	CMP R2, R11
	BNE PAUSA
	;BX LR ;BIFURCACION, DETERMINA EL ESTADO DEL PROCESADOR
	BEQ APAGADO
	
PAUSA3 ;RETARDO
	ADD R2, #1
	NOP
	NOP
	NOP
	NOP
	CMP R2, R12
	BNE PAUSA
	;BX LR ;BIFURCACION, DETERMINA EL ESTADO DEL PROCESADOR
	BEQ APAGADO
	
PAUSA4 ;RETARDO
	ADD R2, #1
	NOP
	NOP
	NOP
	NOP
	CMP R2, R13
	BNE PAUSA
	;BX LR ;BIFURCACION, DETERMINA EL ESTADO DEL PROCESADOR
	BEQ APAGADO
	
PAUSA5 ;RETARDO
	ADD R2, #1
	NOP
	NOP
	NOP
	NOP
	CMP R2, R14
	BNE PAUSA
	;BX LR ;BIFURCACION, DETERMINA EL ESTADO DEL PROCESADOR
	BEQ APAGADO

ENCENDIDO
	 LDR R8, =PF12
	 LDR R9, =0x06
	 STR R9, [R5]
	 CMP R15, =1
	 BEQ PAUSA1
	 CMP R15, =2
	 BEQ PAUSA2
	 CMP R15, =3
	 BEQ PAUSA3
	 CMP R15, =4
	 BEQ PAUSA4
	 CMP R15, =5
	 BEQ PAUSA5

APAGADO
	 LDR R8, =PF12
	 LDR R9, =0x00
	 STR R9, [R5]
	 B Loop
SUMA
	 ADD R15, #1 
	 CPM R15, #5
	 BEQ REINICIO1

RESTA
	 SUB R15, #1
	 CMP R15, #0
	 BEQ REINICIO2
	 

REINICIO1
	 LDR R15, =0
	 B Loop

REINICIO2
	 LDR R15, =4
	 B Loop
	 
Loop ;CICLO PARA ENCENDER Y APAGAR EL LED 
;CARGAR EN R0 EL CONTENIDO DE LA DIRECCION DE MEMORIA A LA QUE 
;APUNTA R1 (PF2)
	LDR R1, =PF0
	LDR R0, [R1]
	
	LDR R3, =PF3
	LDR R4, [R3]
	
	LDR R5, =PF4
	LDR R6, [R5]
	
	LDR R2, =0
	
	STR R0, [R1]
	STR R4, [R3]
	STR R6, [R5]
	;REINICIAMOS LA PAUSA
	LDR R0, =0
	LDR R7, =CONSTANTE
	
	;IF(F0=1) ENCENDER EL LED, IF(F0=0) APAGAR EL LED
	CMP R0,#0x01
	BEQ ENCENDIDO
	CMP R4,#0x08
	BEQ SUMA
	CMP R6,#0x10
	BEQ RESTA

	B Loop
	
	ALIGN 
	END